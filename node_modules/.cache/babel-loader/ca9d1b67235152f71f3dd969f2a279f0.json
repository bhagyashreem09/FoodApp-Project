{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Projects\\\\FoodApp-Project\\\\src\\\\components\\\\Cart\\\\Cart.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport Modal from \"../UI/Modal\";\nimport classes from \"./Cart.module.css\";\nimport CartContext from \"../../store/cart-context\";\nimport CartItem from \"./CartItem\";\nimport Checkout from \"./Checkout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cart(props) {\n  _s();\n\n  const [isCheckout, setIsCheckout] = useState(false);\n  const [orderConfirmedShown, setOrderConfirmedShown] = useState(false);\n  const [orderErrorShown, setOrderErrorShown] = useState(false);\n  const cartCtx = useContext(CartContext);\n  const totalAmount = `₹ ${cartCtx.totalAmount.toFixed(2)}`;\n  const hasItems = cartCtx.items.lenght > 0;\n\n  function cartItemAddHandler(item) {\n    cartCtx.addItem(item);\n  }\n\n  function cartItemRemoveHandler(id) {\n    cartCtx.removeItem(id);\n  }\n\n  function orderHandler() {\n    setIsCheckout(true);\n  }\n\n  function submitOrderHandler(userData) {\n    fetch(\"https://food-order-app-d196f-default-rtdb.firebaseio.com/orders.json\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        customer: userData,\n        orderItems: cartCtx.items\n      })\n    }).then(response => {\n      if (response.ok) {\n        setOrderConfirmedShown(true);\n        console.log(\"Data post successful\"); // props.orderConfirmed(userData.name);\n\n        console.log(userData.name);\n      } else {\n        console.log(\"Data sent not successful\");\n      }\n    }).catch(error => {\n      setOrderErrorShown(true);\n      throw new Error(\"Oops! Something went wrong. Try again\");\n    });\n    setOrderConfirmedShown(false);\n    cartCtx.clearCart();\n  }\n\n  const modalActions = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.actions,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: classes[\"button--alt\"],\n      onClick: props.onClose,\n      children: [\" \", \"Close\", \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), !hasItems && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: orderHandler,\n      className: classes.button,\n      children: [\" \", \"Order\", \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n\n  const cartItems = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes[\"cart-items\"],\n    children: [cartCtx.items.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n      name: item.name,\n      amount: item.amount,\n      price: item.price,\n      onAdd: cartItemAddHandler.bind(null, item),\n      onRemove: cartItemRemoveHandler.bind(null, item.id)\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!orderConfirmedShown && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: props.onClose,\n      children: [cartItems, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.total,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Total Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: totalAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), isCheckout && /*#__PURE__*/_jsxDEV(Checkout, {\n        onConfirm: submitOrderHandler,\n        onCancel: props.onClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this), !isCheckout && modalActions]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), orderConfirmedShown && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: props.onClose,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Order Confirmed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: props.onClose,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), orderErrorShown && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: props.onClose,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: props.onClose,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cart, \"m0v4C2YjTxPStmZKWaV2SxL9GJA=\");\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["D:/Work/Projects/FoodApp-Project/src/components/Cart/Cart.js"],"names":["useContext","useState","Modal","classes","CartContext","CartItem","Checkout","Cart","props","isCheckout","setIsCheckout","orderConfirmedShown","setOrderConfirmedShown","orderErrorShown","setOrderErrorShown","cartCtx","totalAmount","toFixed","hasItems","items","lenght","cartItemAddHandler","item","addItem","cartItemRemoveHandler","id","removeItem","orderHandler","submitOrderHandler","userData","fetch","method","body","JSON","stringify","customer","orderItems","then","response","ok","console","log","name","catch","error","Error","clearCart","modalActions","actions","onClose","button","cartItems","map","amount","price","bind","total"],"mappings":"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","sourcesContent":["import { useContext, useState } from \"react\";\r\n\r\nimport Modal from \"../UI/Modal\";\r\nimport classes from \"./Cart.module.css\";\r\nimport CartContext from \"../../store/cart-context\";\r\nimport CartItem from \"./CartItem\";\r\nimport Checkout from \"./Checkout\";\r\n\r\nfunction Cart(props) {\r\n  const [isCheckout, setIsCheckout] = useState(false);\r\n  const [orderConfirmedShown, setOrderConfirmedShown] = useState(false);\r\n  const [orderErrorShown, setOrderErrorShown] = useState(false);\r\n\r\n  const cartCtx = useContext(CartContext);\r\n\r\n  const totalAmount = `₹ ${cartCtx.totalAmount.toFixed(2)}`;\r\n  const hasItems = cartCtx.items.lenght > 0;\r\n\r\n  function cartItemAddHandler(item) {\r\n    cartCtx.addItem(item);\r\n  }\r\n\r\n  function cartItemRemoveHandler(id) {\r\n    cartCtx.removeItem(id);\r\n  }\r\n\r\n  function orderHandler() {\r\n    setIsCheckout(true);\r\n  }\r\n\r\n  function submitOrderHandler(userData) {\r\n    fetch(\r\n      \"https://food-order-app-d196f-default-rtdb.firebaseio.com/orders.json\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          customer: userData,\r\n          orderItems: cartCtx.items,\r\n        }),\r\n      }\r\n    )\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          setOrderConfirmedShown(true);\r\n          console.log(\"Data post successful\");\r\n          // props.orderConfirmed(userData.name);\r\n          console.log(userData.name);\r\n        } else {\r\n          console.log(\"Data sent not successful\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setOrderErrorShown(true);\r\n        throw new Error(\"Oops! Something went wrong. Try again\");\r\n      });\r\n    setOrderConfirmedShown(false);\r\n    cartCtx.clearCart();\r\n  }\r\n\r\n  const modalActions = (\r\n    <div className={classes.actions}>\r\n      <button className={classes[\"button--alt\"]} onClick={props.onClose}>\r\n        {\" \"}\r\n        Close{\" \"}\r\n      </button>\r\n      {!hasItems && (\r\n        <button onClick={orderHandler} className={classes.button}>\r\n          {\" \"}\r\n          Order{\" \"}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const cartItems = (\r\n    <div className={classes[\"cart-items\"]}>\r\n      {cartCtx.items.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          name={item.name}\r\n          amount={item.amount}\r\n          price={item.price}\r\n          onAdd={cartItemAddHandler.bind(null, item)}\r\n          onRemove={cartItemRemoveHandler.bind(null, item.id)}\r\n        />\r\n      ))}{\" \"}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {!orderConfirmedShown && (\r\n        <Modal onClose={props.onClose}>\r\n          {cartItems}\r\n          <div className={classes.total}>\r\n            <span>Total Amount</span>\r\n            <span>{totalAmount}</span>\r\n          </div>\r\n          {isCheckout && (\r\n            <Checkout onConfirm={submitOrderHandler} onCancel={props.onClose} />\r\n          )}\r\n          {!isCheckout && modalActions}\r\n        </Modal>\r\n      )}\r\n\r\n      {orderConfirmedShown && (\r\n        <Modal onClose={props.onClose}>\r\n          <h1>Order Confirmed</h1>\r\n          <div className={classes.actions}>\r\n            <button type=\"button\" onClick={props.onClose}>\r\n              OK\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n\r\n      {orderErrorShown && (\r\n        <Modal onClose={props.onClose}>\r\n          <h1>Failed</h1>\r\n          <div className={classes.actions}>\r\n            <button type=\"button\" onClick={props.onClose}>\r\n              OK\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}