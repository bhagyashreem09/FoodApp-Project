{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Projects\\\\FoodApp-Project\\\\src\\\\store\\\\CartProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer } from \"react\";\nimport CartContext from \"./cart-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultCartState = {\n  items: [],\n  totalAmount: 0\n};\n\nfunction cartReducer(state, action) {\n  if (action.type === 'ADD') {\n    const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n    const existingCartItemIndex = state.items.findIndex(item => item.id === action.item.id); //will find index of an item in an array\n\n    const existingCartItem = state.items[existingCartItemIndex];\n    let updatedItems;\n\n    if (existingCartItem) {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  if (action.type === 'REMOVE') {\n    const existingCartItemIndex = state.items.findIndex(item => item.id === action.id);\n    const existingItem = state.items[existingCartItemIndex];\n    const updatedTotalAmount = state.totalAmount - existingItem.price; // subtracting the item price from total amount\n\n    let updatedItems;\n\n    if (existingItem.amount === 1) {\n      updatedItems = state.items.filter(item => item.id !== action.id); //all items where the id is not equal to action id are kept. And the one item, where item id is equal to action id(which is to be removed) is removed from the newly generated array. rest is kept. \n    } else {\n      // if amount geater than 1, then we don't want to remove the item from the array, we just want to update the amount\n      const updatedItem = { ...existingItem,\n        amount: existingItem.amount - 1\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  if (action.type === 'CLEAR') {\n    return defaultCartState;\n  }\n\n  return defaultCartState;\n}\n\nfunction CartProvider(props) {\n  _s();\n\n  const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState);\n\n  function addItemToCartHandler(item) {\n    dispatchCartAction({\n      type: 'ADD',\n      item: item\n    }); // dispatching action (then handling in cart reducer)\n  }\n\n  function removeItemFromCartHandler(id) {\n    dispatchCartAction({\n      type: 'REMOVE',\n      id: id\n    }); // dispatching action\n  }\n\n  function clearCartHandler() {\n    dispatchCartAction({\n      type: 'CLEAR'\n    });\n  }\n\n  const cartContext = {\n    items: cartState.items,\n    totalAmount: cartState.totalAmount,\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: cartContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CartProvider, \"PxEugEseoIJIbjFwtAJal5z5ClY=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["D:/Work/Projects/FoodApp-Project/src/store/CartProvider.js"],"names":["useReducer","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","concat","existingItem","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","clearCartHandler","cartContext","addItem","removeItem","children"],"mappings":"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","sourcesContent":["import { useReducer } from \"react\";\r\n\r\nimport CartContext from \"./cart-context\";\r\n\r\n\r\nconst defaultCartState = {\r\n    items : [],\r\n    totalAmount : 0\r\n}\r\n\r\nfunction cartReducer(state, action) {\r\n    if (action.type === 'ADD') {\r\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\r\n\r\n        const existingCartItemIndex = state.items.findIndex(\r\n            item => (item.id === action.item.id)\r\n            );  //will find index of an item in an array\r\n\r\n        const existingCartItem = state.items[existingCartItemIndex];\r\n\r\n        let updatedItems;\r\n        if (existingCartItem) {\r\n            const updatedItem = {\r\n                ...existingCartItem,\r\n                amount: existingCartItem.amount + action.item.amount\r\n            };\r\n            updatedItems = [...state.items];\r\n            updatedItems[existingCartItemIndex] = updatedItem;\r\n        } else {\r\n            updatedItems = state.items.concat(action.item);\r\n        }\r\n\r\n        return {\r\n            items : updatedItems,\r\n            totalAmount : updatedTotalAmount\r\n        }\r\n    }\r\n\r\n    if (action.type === 'REMOVE') {\r\n\r\n        const existingCartItemIndex = state.items.findIndex(\r\n            (item) => (item.id === action.id)\r\n        );\r\n        const existingItem = state.items[existingCartItemIndex];   \r\n        const updatedTotalAmount = state.totalAmount - existingItem.price;   // subtracting the item price from total amount\r\n        \r\n        let updatedItems;\r\n        if (existingItem.amount === 1) {\r\n            updatedItems = state.items.filter(item => item.id !== action.id); //all items where the id is not equal to action id are kept. And the one item, where item id is equal to action id(which is to be removed) is removed from the newly generated array. rest is kept. \r\n        } else {  // if amount geater than 1, then we don't want to remove the item from the array, we just want to update the amount\r\n            const updatedItem = {...existingItem, amount: existingItem.amount - 1};\r\n            updatedItems = [...state.items];\r\n            updatedItems[existingCartItemIndex] = updatedItem;\r\n        }\r\n\r\n        return {\r\n            items: updatedItems,\r\n            totalAmount: updatedTotalAmount\r\n        }\r\n    }\r\n\r\n    if (action.type === 'CLEAR') {\r\n        return defaultCartState;\r\n    }\r\n\r\n    return defaultCartState;\r\n}\r\n\r\nfunction CartProvider(props) {\r\n    const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState);\r\n\r\n    function addItemToCartHandler (item) {\r\n        dispatchCartAction({type : 'ADD', item : item})      // dispatching action (then handling in cart reducer)\r\n    }\r\n\r\n    function removeItemFromCartHandler (id) {\r\n        dispatchCartAction({type : 'REMOVE', id : id})       // dispatching action\r\n    }\r\n\r\n    function clearCartHandler () {\r\n        dispatchCartAction({type : 'CLEAR'});\r\n    }\r\n\r\n    const cartContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount,\r\n        addItem: addItemToCartHandler,\r\n        removeItem: removeItemFromCartHandler\r\n    };\r\n\r\n    return (\r\n\r\n        <CartContext.Provider value={cartContext}>\r\n            {props.children}\r\n        </CartContext.Provider>\r\n\r\n    )\r\n}\r\n\r\nexport default CartProvider;"]},"metadata":{},"sourceType":"module"}